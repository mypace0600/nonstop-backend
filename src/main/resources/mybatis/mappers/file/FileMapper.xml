<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.app.nonstop.domain.file.mapper.FileMapper">

    <insert id="save" useGeneratedKeys="true" keyProperty="id">
        INSERT INTO files (
            uploader_id,
            target_domain,
            target_id,
            purpose,
            file_url,
            original_file_name,
            content_type
            -- file_size_bytes can be added if needed
        ) VALUES (
            #{uploaderId},
            #{targetDomain},
            #{targetId},
            #{purpose, typeHandler=org.apache.ibatis.type.EnumTypeHandler},
            #{fileUrl},
            #{originalFileName},
            #{contentType}
        )
    </insert>

</mapper>
