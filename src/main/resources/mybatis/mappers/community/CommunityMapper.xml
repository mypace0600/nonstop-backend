<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.app.nonstop.domain.community.mapper.CommunityMapper">

    <resultMap id="communityMap" type="com.app.nonstop.domain.community.entity.Community">
        <id property="id" column="id"/>
        <result property="universityId" column="university_id"/>
        <result property="name" column="name"/>
        <result property="description" column="description"/>
        <result property="icon" column="icon"/>
        <result property="isAnonymous" column="is_anonymous"/>
        <result property="sortOrder" column="sort_order"/>
        <result property="createdAt" column="created_at"/>
    </resultMap>

    <select id="findByUniversityId" resultMap="communityMap">
        SELECT
            id,
            university_id,
            name,
            description,
            icon,
            is_anonymous,
            sort_order,
            created_at
        FROM
            communities
        WHERE
            university_id = #{universityId}
        ORDER BY
            sort_order ASC, name ASC
    </select>

</mapper>
